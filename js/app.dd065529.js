(function(){"use strict";var t={7419:function(t,e,i){var r=i(8935),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("header",[i("h1",[t._v(t._s(t.title))])]),i("main",[i("div",{staticClass:"container"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.imageUrl,expression:"imageUrl"}],ref:"imageCotainer",staticClass:"image-cotainer",class:t.imageUrl?"":"none",on:{mousemove:t.mouseMove,mousedown:t.mouseDown,mouseup:t.mouseUp}},[i("div",{staticClass:"caliper"}),i("img",{attrs:{src:t.imageUrl,alt:"选中的图片"}}),i("div",{staticClass:"historys"},t._l(t.operationRecord,(function(e){return i("div",{key:e.id,staticClass:"historys-caliper",style:e.style,attrs:{"data-size":e.size}},[i("div",{staticClass:"close",on:{click:function(i){return t.closeOperationRecord(e.id)}}},[t._v("x")])])})),0),i("div",{staticClass:"selector"})]),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.imageUrl,expression:"!imageUrl"}],staticClass:"image-cotainer none",on:{click:t.getImageUrl,drop:function(e){return e.preventDefault(),t.getImageUrlDrag.apply(null,arguments)},dragleave:function(t){t.preventDefault()},dragenter:function(t){t.preventDefault()},dragover:function(t){t.preventDefault()}}},[i("span",[t._v("点击或拖拽图片")])])])]),i("footer",[i("span",[t._v(t._s(t.copyright))]),i("span",[t._v(t._s(t.newSize))])])])},n=[],a={data(){return{title:"Caliper",copyright:"© 2020 Caliper",newSize:"0x0",imageUrl:"",operationRecord:[],historys:[],isMouseDown:!1,caliper:document.querySelector(".caliper"),start:{x:0,y:0},end:{x:0,y:0}}},methods:{getImageUrl(){let t=document.createElement("input");t.type="file",t.accept="image/*",t.onchange=t=>{let e=t.target.files[0],i=new FileReader;i.readAsDataURL(e),i.onload=t=>{this.imageUrl=t.target.result}},t.click()},closeOperationRecord(t){this.operationRecord=this.operationRecord.filter((e=>e.id!=t))},getImageUrlDrag(t){t.stopPropagation(),t.preventDefault();for(var e=t.dataTransfer,i=0;i!==e.files.length;i++)this.uploadFile(e.files[i])},uploadFile:function(t){if(/^image\/.*$/.test(t.type)){var e=new FileReader(t);e.onload=t=>{this.imageUrl=t.target.result},e.readAsDataURL(t)}},mouseMove(t){let e=t.pageX,i=t.pageY;this.isMouseDown&&(e<=this.start.x?this.start.x=e:this.end.x=e,i<=this.start.y?this.start.y=i:this.end.y=i,this.draw())},mouseDown(t){let e=t.pageX,i=t.pageY,r={x:e,y:i};this.isMouseDown=!0,this.start=JSON.parse(JSON.stringify(r)),this.end=JSON.parse(JSON.stringify(r)),this.draw()},mouseUp(t){let e=t.pageX,i=t.pageY,r=window.innerWidth,s=window.innerHeight,n={id:this.historys.length,start:JSON.parse(JSON.stringify(this.start)),end:JSON.parse(JSON.stringify(this.end)),size:`${this.end.x-this.start.x}x${this.end.y-this.start.y}`,style:{left:`${this.start.x}px`,top:`${this.start.y}px`,right:r-this.end.x+"px",bottom:s-this.end.y+"px",zIndex:this.historys.length}},a={x:e,y:i};this.end=a,this.isMouseDown=!1,this.end.x-this.start.x>4&&this.end.y-this.start.y>4&&(this.historys.push(n),this.operationRecord.push(n),this.$store.addHistorys(n),this.$store.addOperationRecord(n));let o=document.querySelector(".caliper");o.classList.remove("active")},draw(){let t=window.innerWidth,e=window.innerHeight,i=document.querySelector(".caliper");i.style.display="block",i.style.top=this.start.y+"px",i.style.left=this.start.x+"px",i.style.bottom=Math.abs(e-this.end.y)+"px",i.style.right=Math.abs(t-this.end.x)+"px",i.setAttribute("data-size",`${this.end.x-this.start.x}x${this.end.y-this.start.y}`),this.newSize=`${this.end.x-this.start.x}x${this.end.y-this.start.y}`,i.classList.add("active")}},mounted(){var t=document.querySelector(".image-cotainer.none");t.addEventListener("dragenter",this.onDrag,!1),t.addEventListener("dragover",this.onDrag,!1),t.addEventListener("drop",this.onDrop,!1)}},o=a,l=i(1001),c=(0,l.Z)(o,s,n,!1,null,null,null),d=c.exports;r.Z.config.productionTip=!1,new r.Z({render:t=>t(d)}).$mount("#app")}},e={};function i(r){var s=e[r];if(void 0!==s)return s.exports;var n=e[r]={exports:{}};return t[r](n,n.exports,i),n.exports}i.m=t,function(){var t=[];i.O=function(e,r,s,n){if(!r){var a=1/0;for(d=0;d<t.length;d++){r=t[d][0],s=t[d][1],n=t[d][2];for(var o=!0,l=0;l<r.length;l++)(!1&n||a>=n)&&Object.keys(i.O).every((function(t){return i.O[t](r[l])}))?r.splice(l--,1):(o=!1,n<a&&(a=n));if(o){t.splice(d--,1);var c=s();void 0!==c&&(e=c)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[r,s,n]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,r){var s,n,a=r[0],o=r[1],l=r[2],c=0;if(a.some((function(e){return 0!==t[e]}))){for(s in o)i.o(o,s)&&(i.m[s]=o[s]);if(l)var d=l(i)}for(e&&e(r);c<a.length;c++)n=a[c],i.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return i.O(d)},r=self["webpackChunkvue_caliper"]=self["webpackChunkvue_caliper"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=i.O(void 0,[998],(function(){return i(7419)}));r=i.O(r)})();
//# sourceMappingURL=app.dd065529.js.map