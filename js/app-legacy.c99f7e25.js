(function(){"use strict";var t={7419:function(t,e,i){i(6992),i(8674),i(9601),i(7727);var n=i(9567),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("header",[i("h1",[t._v(t._s(t.title))])]),i("main",[i("div",{staticClass:"container"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.imageUrl,expression:"imageUrl"}],ref:"imageCotainer",staticClass:"image-cotainer",class:t.imageUrl?"":"none",on:{mousemove:t.mouseMove,mousedown:t.mouseDown,mouseup:t.mouseUp}},[i("div",{staticClass:"caliper"}),i("img",{attrs:{src:t.imageUrl,alt:"选中的图片"}}),i("div",{staticClass:"historys"},t._l(t.operationRecord,(function(e){return i("div",{key:e.id,staticClass:"historys-caliper",style:e.style,attrs:{"data-size":e.size}},[i("div",{staticClass:"close",on:{click:function(i){return t.closeOperationRecord(e.id)}}},[t._v("x")])])})),0),i("div",{staticClass:"selector"})]),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.imageUrl,expression:"!imageUrl"}],staticClass:"image-cotainer none",on:{click:t.getImageUrl,drop:function(e){return e.preventDefault(),t.getImageUrlDrag.apply(null,arguments)},dragleave:function(t){t.preventDefault()},dragenter:function(t){t.preventDefault()},dragover:function(t){t.preventDefault()}}},[i("span",[t._v("点击或拖拽图片")])])])]),i("footer",[i("span",[t._v(t._s(t.copyright))]),i("span",[t._v(t._s(t.newSize))])])])},s=[],a=(i(7327),i(1539),i(4916),i(7601),i(8862),i(2222),{data:function(){return{title:"Caliper",copyright:"© 2020 Caliper",newSize:"0x0",imageUrl:"",operationRecord:[],historys:[],isMouseDown:!1,caliper:document.querySelector(".caliper"),start:{x:0,y:0},end:{x:0,y:0}}},methods:{getImageUrl:function(){var t=this,e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=function(e){var i=e.target.files[0],n=new FileReader;n.readAsDataURL(i),n.onload=function(e){t.imageUrl=e.target.result}},e.click()},closeOperationRecord:function(t){this.operationRecord=this.operationRecord.filter((function(e){return e.id!=t}))},getImageUrlDrag:function(t){t.stopPropagation(),t.preventDefault();for(var e=t.dataTransfer,i=0;i!==e.files.length;i++)this.uploadFile(e.files[i])},uploadFile:function(t){var e=this;if(/^image\/.*$/.test(t.type)){var i=new FileReader(t);i.onload=function(t){e.imageUrl=t.target.result},i.readAsDataURL(t)}},mouseMove:function(t){var e=t.pageX,i=t.pageY;this.isMouseDown&&(e<=this.start.x?this.start.x=e:this.end.x=e,i<=this.start.y?this.start.y=i:this.end.y=i,this.draw())},mouseDown:function(t){var e=t.pageX,i=t.pageY,n={x:e,y:i};this.isMouseDown=!0,this.start=JSON.parse(JSON.stringify(n)),this.end=JSON.parse(JSON.stringify(n)),this.draw()},mouseUp:function(t){var e=t.pageX,i=t.pageY,n=window.innerWidth,r=window.innerHeight,s={id:this.historys.length,start:JSON.parse(JSON.stringify(this.start)),end:JSON.parse(JSON.stringify(this.end)),size:"".concat(this.end.x-this.start.x,"x").concat(this.end.y-this.start.y),style:{left:"".concat(this.start.x,"px"),top:"".concat(this.start.y,"px"),right:"".concat(n-this.end.x,"px"),bottom:"".concat(r-this.end.y,"px"),zIndex:this.historys.length}},a={x:e,y:i};this.end=a,this.isMouseDown=!1,this.end.x-this.start.x>4&&this.end.y-this.start.y>4&&(this.historys.push(s),this.operationRecord.push(s),this.$store.addHistorys(s),this.$store.addOperationRecord(s));var o=document.querySelector(".caliper");o.classList.remove("active")},draw:function(){var t=window.innerWidth,e=window.innerHeight,i=document.querySelector(".caliper");i.style.display="block",i.style.top=this.start.y+"px",i.style.left=this.start.x+"px",i.style.bottom=Math.abs(e-this.end.y)+"px",i.style.right=Math.abs(t-this.end.x)+"px",i.setAttribute("data-size","".concat(this.end.x-this.start.x,"x").concat(this.end.y-this.start.y)),this.newSize="".concat(this.end.x-this.start.x,"x").concat(this.end.y-this.start.y),i.classList.add("active")}},mounted:function(){var t=document.querySelector(".image-cotainer.none");t.addEventListener("dragenter",this.onDrag,!1),t.addEventListener("dragover",this.onDrag,!1),t.addEventListener("drop",this.onDrop,!1)}}),o=a,c=i(1001),l=(0,c.Z)(o,r,s,!1,null,null,null),u=l.exports;n.Z.config.productionTip=!1,new n.Z({render:function(t){return t(u)}}).$mount("#app")}},e={};function i(n){var r=e[n];if(void 0!==r)return r.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,i),s.exports}i.m=t,function(){var t=[];i.O=function(e,n,r,s){if(!n){var a=1/0;for(u=0;u<t.length;u++){n=t[u][0],r=t[u][1],s=t[u][2];for(var o=!0,c=0;c<n.length;c++)(!1&s||a>=s)&&Object.keys(i.O).every((function(t){return i.O[t](n[c])}))?n.splice(c--,1):(o=!1,s<a&&(a=s));if(o){t.splice(u--,1);var l=r();void 0!==l&&(e=l)}}return e}s=s||0;for(var u=t.length;u>0&&t[u-1][2]>s;u--)t[u]=t[u-1];t[u]=[n,r,s]}}(),function(){i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,n){var r,s,a=n[0],o=n[1],c=n[2],l=0;if(a.some((function(e){return 0!==t[e]}))){for(r in o)i.o(o,r)&&(i.m[r]=o[r]);if(c)var u=c(i)}for(e&&e(n);l<a.length;l++)s=a[l],i.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return i.O(u)},n=self["webpackChunkvue_caliper"]=self["webpackChunkvue_caliper"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=i.O(void 0,[998],(function(){return i(7419)}));n=i.O(n)})();
//# sourceMappingURL=app-legacy.c99f7e25.js.map